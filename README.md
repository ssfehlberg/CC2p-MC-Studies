# CC2p-MC-Studies
## Author: Samantha Sword-Fehlberg
## 2021-2022 

This repository is one of three respositories utilized by the MicroBooNE CC2p XSec Analysis. This repository specifically selects events containing 1 muon with $0.1 < P_{\mu} < 1.2$ GeV $/c $, 2 protons with $0.3 < P_{p} < 1.0$ GeV $/c $, no pions (charged or neutral) with $P_\pi > 0.65$ GeV $/c $, no other hadrons, and any number of neutrons from different Monte-Carlo (MC) samples. There are two selection C+header files meant to select events from GENIE MC samples (GENIE_selection.C/.h) and from a GiBBU and NEUT sample generated by Afro (Other_Selection.C/.h). Note that the Other_Selection code was never completed or utilized by the 2022 version of this analysis. The plotting.C/h files create a number of plots (png form) and saves them in /uboone/data/users/sfehlber/CC2p/MC_Studies/images/.   

## Getting the Code

On the GPVMs execute the following code:
```
mkdir CC2p_MC_Studies
cd CC2p_MC_Studies
git clone https://github.com/ssfehlberg/CC2p-MC-Studies.git
```
This creates a new directory called CC2p_MC_Studies and clones the repository into this directory. 

## Understanding the Code

## tools/constants.h
Namespace containing the momentum requirements for the particles, a number of constants (such as mass and binding energy), and some event counters. The user needs to be aware of four booleans:
- _deubg: controls the debug statements
- add_protons: adds the momentum of the protons together in the calculation of the STVs
- use_xsec_binning: Utilize the binning defined by the CC2p Xsec analysis or general binning
- fsi: Look at events with or without final state interactions (FSI) 

## tools/histogram_funcs.h
Class containing ROOT TH object definitions. Also containssome functions meant to process these objects

## tools/variables.h
Class which contains all the calculations of momentum, energy, detector angles, opening angles, and STVs. THIS CLASS IS ALSO UTILIZED IN THE EVENT SELECTION REPOSITORY.

There are three sets of C+header files each with a different purpose mentioned below:

## GENIE_Selection
### How to run the code: 
```
#setup uboonecode which contains distro. of ROOT
setup_v52
root -b GENIE_Selection.C

#In ROOT Session:
GENIE_Selection s
s.Loop()
```
At this point the user will be prompted to provide a numerical input to indicate which GENIE MC sample to process: 
- 0 = Empirical (G18_02a_00_000) 
- 1 = Nieves (G18_10a_02_11a)
- 2 = SuSAv2 (G21_11b_00_000) 
- 3 = GCF + FSI (Created by Steven Gardiner). As of 7/15/2022 this sample does not work.
- 4 = Nuisance (not really nuisance but actually the GENIE v3.2.0 tag of the SuSA model) 

After the user selects a sample, the selection then runs and selects events that adhere to the previously mentioned signal definition. The following files are produced:
- ROOT file containing histograms (Saved to /uboone/data/users/sfehlber/CC2p/MC_Studies/GENIE/histograms/)
- Three CSV Files:
   - (1) number of events remaining after each cut 
   - (2) breakdown of selected events in terms of interaction mode 
   - (3) RSE in form as requested by Steven and Afro   

## Other_Selection

As mentioned above, this code was meant to be used to selection signal events from GiBUU and NEUT samples, but was never completed.

## plotting

### How to run the code:

```
#Assuming uboonecode setup and all samples have been processed
root -b plotting.C

#in root session
plotting.s
s.main()
```
This makes plots that compare the selected events from the GENIE MC samples as a function of a number of variables. It creates area normalized and cross section plots that allow the user to compare the different generator outputs. These plots are saved within /uboone/data/users/sfehlber/CC2p/MC_Studies/images/
